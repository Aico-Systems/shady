/* src/theme.css - Updated with animation variables for consistent transitions */
/* 
 * THEME ARCHITECTURE
 * ------------------
 * This file defines all color and theme variables in a structured way:
 * 
 * 1. Base colors (raw values) - These don't change with theme
 * 2. Common animation variables
 * 3. Semantic tokens for light theme (default)
 * 4. Component-specific variables for light theme
 * 5. Dark theme overrides for semantic tokens
 * 6. Dark navigation theme (can be used independently)
 */

:root {
  /* ======= 1. BASE COLORS ======= */
  /* These colors don't change with theme - they're our core palette */
  --aico-black: rgb(0, 0, 0);
  --aico-white: rgb(255, 255, 255);
  --aico-mint: rgb(59, 130, 246);
  --aico-lime: rgb(147, 197, 253);
  --aico-flieder: rgb(37, 99, 235);

  --aico-grey-100: rgb(241, 245, 249);
  /* Lightest */
  --aico-grey-200: rgb(226, 232, 240);
  --aico-grey-300: rgb(203, 213, 225);
  --aico-grey-400: rgb(148, 163, 184);
  --aico-grey-500: rgb(100, 116, 139);
  /* Neutral */
  --aico-grey-600: rgb(71, 85, 105);
  --aico-grey-700: rgb(51, 65, 85);
  --aico-grey-800: rgb(30, 41, 59);
  --aico-grey-900: rgb(15, 23, 42);
  /* Darkest */

  --aico-success: rgb(34, 197, 94);
  --aico-warning: rgb(245, 158, 11);
  --aico-danger: rgb(239, 68, 68);
  --aico-info: rgb(59, 130, 246);

  /* RGB values for colors (used with rgba() or color-mix) */
  --aico-mint-rgb: 59, 130, 246;
  --aico-lime-rgb: 147, 197, 253;
  --aico-flieder-rgb: 37, 99, 235;
  --aico-success-rgb: 34, 197, 94;
  --aico-warning-rgb: 245, 158, 11;
  --aico-danger-rgb: 239, 68, 68;
  --aico-info-rgb: 59, 130, 246;

  /* ======= 2. COMMON ANIMATION VARIABLES ======= */
  /* Core timing variables */
  --transition-duration: 0.3s;
  --transition-duration-fast: 0.18s;
  --transition-duration-slow: 0.5s;
  --transition-duration-extra-slow: 0.8s;

  /* Easing curves */
  --transition-easing: cubic-bezier(0.4, 0.0, 0.2, 1);
  --transition-easing-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --transition-easing-smooth: cubic-bezier(0.215, 0.61, 0.355, 1);

  /* Common transition combinations */
  --transition-timing: var(--transition-duration) var(--transition-easing);
  --transition-timing-fast: var(--transition-duration-fast) var(--transition-easing);
  --transition-timing-slow: var(--transition-duration-slow) var(--transition-easing);
  --transition-timing-bounce: var(--transition-duration-slow) var(--transition-easing-bounce);
  --transition-timing-smooth: var(--transition-duration) var(--transition-easing-smooth);

  /* Specialized transitions */
  --sidebar-transition: 0.28s var(--transition-easing);
  --theme-transition: var(--transition-timing-bounce);
  --hover-transition: 0.2s ease;
  --focus-transition: 0.15s ease;
  --transform-transition: 0.2s var(--transition-easing-smooth);

  /* Delays */
  --transition-delay-normal: 0.03s;
  --transition-delay-long: 0.06s;

  /* Property-specific transitions for consistency */
  --transition-colors:
    color var(--transition-timing),
    background-color var(--transition-timing),
    border-color var(--transition-timing);

  --transition-layout:
    width var(--transition-timing),
    height var(--transition-timing),
    margin var(--transition-timing),
    padding var(--transition-timing);

  --transition-transform:
    transform var(--transform-transition);

  --transition-opacity:
    opacity var(--transition-timing);

  --transition-all:
    var(--transition-colors),
    var(--transition-layout),
    var(--transition-transform),
    var(--transition-opacity);

  /* Specific component transitions */
  --transition-button:
    background-color var(--hover-transition),
    color var(--hover-transition),
    transform var(--transform-transition),
    box-shadow var(--transition-timing);

  --transition-nav-item:
    background-color var(--hover-transition),
    color var(--hover-transition),
    border-color var(--hover-transition);

  --transition-sidebar-text:
    opacity var(--sidebar-transition),
    width var(--sidebar-transition);

  --transition-category:
    opacity var(--transition-timing),
    transform var(--transition-timing);

  /* Legacy support - keeping these for backwards compatibility */
  --transition-base: var(--transition-timing);

  /* Layout variables for consistent spacing */
  --sidebar-width: 240px;
  --sidebar-collapsed-width: 68px;
  --header-height: 60px;
  --content-max-width: 1200px;

  /* ======= 3. SEMANTIC TOKENS (LIGHT THEME) ======= */
  /* These map our base colors to semantic usage - will be overridden in dark theme */
  --aico-color-text-primary: var(--aico-grey-900);
  --aico-color-text-secondary: var(--aico-grey-700);
  --aico-color-text-tertiary: var(--aico-grey-500);
  --aico-color-text-inverse: var(--aico-white);

  --aico-color-bg-primary: var(--aico-white);
  --aico-color-bg-secondary: var(--aico-grey-100);
  --aico-color-bg-tertiary: var(--aico-grey-200);
  --aico-color-bg-inverse: var(--aico-grey-900);

  --aico-color-border-light: var(--aico-grey-200);
  --aico-color-border-medium: var(--aico-grey-300);
  --aico-color-border-dark: var(--aico-grey-500);

  /* Base theme mapping for backward compatibility */
  --aico-color-black: var(--aico-black);
  --aico-color-white: var(--aico-white);
  --aico-color-mint: var(--aico-mint);
  --aico-color-lime: var(--aico-lime);
  --aico-color-flieder: var(--aico-flieder);
  --aico-color-light: var(--aico-grey-100);
  --aico-color-grey-light: var(--aico-grey-200);
  --aico-color-grey-neutral: var(--aico-grey-500);
  --aico-color-grey-dark: var(--aico-grey-800);
  --aico-color-dark: var(--aico-grey-900);
  --aico-color-success: var(--aico-success);
  --aico-color-warning: var(--aico-warning);
  --aico-color-danger: var(--aico-danger);
  --aico-color-info: var(--aico-info);

  /* Legacy component variables - map to semantic tokens */
  --surface-elevated: var(--aico-color-bg-primary);
  --surface-secondary: var(--aico-color-bg-secondary);
  --surface-tertiary: var(--aico-color-bg-tertiary);
  --surface-card: var(--aico-color-bg-primary);
  --surface-muted: var(--aico-color-bg-tertiary);
  --border-primary: var(--aico-color-border-light);
  --border-subtle: var(--aico-color-border-light);
  --text-primary: var(--aico-color-text-primary);
  --text-secondary: var(--aico-color-text-secondary);
  --text-tertiary: var(--aico-color-text-tertiary);
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-color: rgba(0, 0, 0, 0.1);

  /* Status colors */
  --status-success-bg: rgba(34, 197, 94, 0.08);
  --status-success-border: rgba(34, 197, 94, 0.6);
  --status-success-text: rgb(22, 101, 52);
  --status-success-pill-bg: rgba(34, 197, 94, 0.18);
  --status-success-pill-text: rgb(22, 101, 52);
  --status-warning-bg: rgba(245, 158, 11, 0.08);
  --status-warning-border: rgba(245, 158, 11, 0.4);
  --status-warning-text: rgb(133, 77, 14);
  --status-warning-pill-bg: rgba(245, 158, 11, 0.18);
  --status-warning-pill-text: rgb(133, 77, 14);
  --status-error-bg: rgba(239, 68, 68, 0.08);
  --status-error-border: rgba(239, 68, 68, 0.5);
  --status-error-text: rgb(127, 29, 29);
  --status-error-pill-bg: rgba(239, 68, 68, 0.2);
  --status-error-pill-text: rgb(127, 29, 29);

  /* xyflow (React Flow / Svelte Flow) theming variables for light theme */
  --xy-node-color: var(--aico-color-text-primary);
  --xy-node-background-color: var(--aico-color-bg-primary);
  --xy-node-border: 1px solid var(--aico-color-border-medium);
  --xy-node-border-selected: 1px solid var(--aico-mint);
  --xy-node-boxshadow-hover: 0 1px 4px 1px rgba(0, 0, 0, 0.08);
  --xy-node-boxshadow-selected: 0 0 0 0.5px var(--aico-mint);
  --xy-edge-stroke: var(--aico-grey-400);
  --xy-edge-stroke-selected: var(--aico-mint);
  --xy-handle-background-color: var(--aico-grey-400);
  --xy-handle-border-color: var(--aico-color-bg-primary);
  --xy-controls-button-background-color: var(--aico-color-bg-primary);
  --xy-controls-button-background-color-hover: var(--aico-color-bg-secondary);
  --xy-controls-button-color: var(--aico-color-text-primary);
  --xy-controls-button-border-color: var(--aico-color-border-light);
  --xy-background-color: var(--aico-color-bg-primary);
  --xy-background-pattern-dots-color: var(--aico-color-border-light);
  --xy-background-pattern-lines-color: var(--aico-color-border-light);
  --xy-minimap-background-color: var(--aico-color-bg-primary);
  --xy-minimap-mask-background-color: rgba(255, 255, 255, 0.8);
  --xy-selection-background-color: rgba(59, 130, 246, 0.08);
  --xy-selection-border: 1px dotted rgba(59, 130, 246, 0.8);

  /* ======= 4. COMPONENT-SPECIFIC VARIABLES FOR LIGHT THEME ======= */
  /* Navigation components (light theme) */
  --nav-bg-color-light: var(--aico-white);
  --nav-text-color-light: var(--aico-grey-800);
  --nav-border-color-light: var(--aico-grey-200);
  --nav-icon-color-light: var(--aico-grey-600);
  --nav-icon-hover-color-light: var(--aico-grey-800);
  --nav-dropdown-bg-light: var(--aico-white);
  --nav-dropdown-text-light: var(--aico-grey-800);
  --nav-item-hover-bg-light: rgba(0, 0, 0, 0.15);
  --nav-item-active-bg-light: rgba(0, 0, 0, 0.1);
  --nav-item-active-color-light: var(--aico-mint);
  --nav-category-text-color-light: var(--aico-grey-600);
  --nav-divider-color-light: var(--aico-grey-200);

  /* Navigation components (dark theme) - these are used as defaults too */
  --nav-bg-color-dark: var(--aico-black);
  --nav-text-color-dark: var(--aico-grey-200);
  --nav-border-color-dark: var(--aico-grey-800);
  --nav-icon-color-dark: var(--aico-grey-300);
  --nav-icon-hover-color-dark: var(--aico-white);
  --nav-dropdown-bg-dark: var(--aico-grey-800);
  --nav-dropdown-text-dark: var(--aico-grey-200);
  --nav-item-hover-bg-dark: rgba(255, 255, 255, 0.14);
  --nav-item-active-bg-dark: rgba(255, 255, 255, 0.1);
  --nav-item-active-color-dark: var(--aico-mint);
  --nav-category-text-color-dark: var(--aico-grey-400);
  --nav-divider-color-dark: var(--aico-grey-800);

  /* Default navigation theme (dark) */
  --sidebar-bg-color: var(--nav-bg-color-dark);
  --sidebar-text-color: var(--nav-text-color-dark);
  --sidebar-border-color: var(--nav-border-color-dark);
  --sidebar-item-hover-bg: var(--nav-item-hover-bg-dark);
  --sidebar-item-active-bg: var(--nav-item-active-bg-dark);
  --sidebar-item-text-color: var(--nav-text-color-dark);
  --sidebar-item-active-color: var(--nav-item-active-color-dark);
  --sidebar-category-text-color: var(--nav-category-text-color-dark);
  --sidebar-divider-color: var(--nav-divider-color-dark);

  /* Header - Default to dark like sidebar */
  --header-bg-color: var(--nav-bg-color-dark);
  --header-text-color: var(--nav-text-color-dark);
  --header-border-color: var(--nav-border-color-dark);
  --header-icon-color: var(--nav-icon-color-dark);
  --header-icon-hover-color: var(--nav-icon-hover-color-dark);
  --header-dropdown-bg: var(--nav-dropdown-bg-dark);
  --header-dropdown-text: var(--nav-dropdown-text-dark);

  /* Content Area */
  --content-bg-color: var(--aico-color-bg-secondary);
  --content-card-bg-color: var(--aico-color-bg-primary);
  --content-text-color: var(--aico-color-text-primary);
  --content-border-color: var(--aico-color-border-light);
  --content-accent-color: var(--aico-mint);

  /* Form / Field (light theme defaults) */
  --field-bg: var(--content-card-bg-color);
  --field-bg-hover: var(--aico-color-bg-secondary);
  --field-bg-disabled: var(--aico-color-bg-tertiary);
  --field-border: var(--content-border-color);
  --field-border-hover: var(--aico-color-border-medium);
  --field-border-focus: var(--accent-color-primary);
  --field-border-invalid: var(--aico-color-danger);
  --field-text: var(--aico-color-text-primary);
  --field-text-disabled: var(--aico-color-text-tertiary);
  --field-placeholder: var(--aico-color-text-tertiary);
  --field-focus-ring: color-mix(in srgb, var(--accent-color-primary) 40%, transparent);
  --field-focus-ring-invalid: color-mix(in srgb, var(--aico-color-danger) 45%, transparent);
  --field-radius: 8px;
  --field-padding-y: 8px;
  --field-padding-x: 10px;
  --field-transition: var(--transition-colors), box-shadow var(--transition-timing), var(--transition-transform);

  /* Common */
  --accent-color-primary: var(--aico-mint);
  --accent-color-secondary: var(--aico-flieder);
  --shadow-color: rgba(0, 0, 0, 0.1);

  /* Z-index stack */
  --z-index-appheader: 1000;
  --z-index-header: 900;
  --z-index-sidebar: 800;
  --z-index-content: 1;
}

/* ======= 5. DARK THEME OVERRIDES ======= */
.aico-dark {
  /* Semantic token overrides for dark theme */
  --aico-color-text-primary: var(--aico-white);
  --aico-color-text-secondary: var(--aico-grey-200);
  --aico-color-text-tertiary: var(--aico-grey-400);
  --aico-color-text-inverse: var(--aico-grey-900);

  --aico-color-bg-primary: var(--aico-grey-900);
  --aico-color-bg-secondary: var(--aico-grey-800);
  --aico-color-bg-tertiary: var(--aico-grey-700);
  --aico-color-bg-inverse: var(--aico-white);

  --aico-color-border-light: var(--aico-grey-700);
  --aico-color-border-medium: var(--aico-grey-600);
  --aico-color-border-dark: var(--aico-grey-500);

  /* Content Area dark theme */
  --content-bg-color: var(--aico-grey-900);
  --content-card-bg-color: var(--aico-grey-800);
  --content-text-color: var(--aico-white);
  --content-border-color: var(--aico-grey-700);

  /* Legacy component variables dark theme */
  --surface-card: var(--aico-grey-800);
  --surface-muted: var(--aico-grey-700);
  --border-subtle: var(--aico-grey-700);
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-color: rgba(0, 0, 0, 0.3);

  /* Status colors dark theme */
  --status-success-bg: rgba(34, 197, 94, 0.12);
  --status-success-border: rgba(34, 197, 94, 0.7);
  --status-success-text: rgb(34, 197, 94);
  --status-success-pill-bg: rgba(34, 197, 94, 0.25);
  --status-success-pill-text: rgb(34, 197, 94);
  --status-warning-bg: rgba(245, 158, 11, 0.12);
  --status-warning-border: rgba(245, 158, 11, 0.5);
  --status-warning-text: rgb(245, 158, 11);
  --status-warning-pill-bg: rgba(245, 158, 11, 0.25);
  --status-warning-pill-text: rgb(245, 158, 11);
  --status-error-bg: rgba(239, 68, 68, 0.12);
  --status-error-border: rgba(239, 68, 68, 0.6);
  --status-error-text: rgb(239, 68, 68);
  --status-error-pill-bg: rgba(239, 68, 68, 0.25);
  --status-error-pill-text: rgb(239, 68, 68);

  /* Form / Field (dark theme overrides) */
  --field-bg: var(--aico-grey-800);
  --field-bg-hover: var(--aico-grey-700);
  --field-bg-disabled: var(--aico-grey-800);
  --field-border: var(--aico-grey-700);
  --field-border-hover: var(--aico-grey-600);
  --field-border-focus: var(--accent-color-primary);
  --field-border-invalid: var(--aico-color-danger);
  --field-text: var(--aico-white);
  --field-text-disabled: var(--aico-grey-500);
  --field-placeholder: var(--aico-grey-400);
  --field-focus-ring: color-mix(in srgb, var(--accent-color-primary) 30%, transparent);
  --field-focus-ring-invalid: color-mix(in srgb, var(--aico-color-danger) 40%, transparent);

  /* xyflow (React Flow / Svelte Flow) theming variables for dark theme */
  --xy-node-color: var(--aico-color-text-primary);
  --xy-node-background-color: var(--aico-color-bg-primary);
  --xy-node-border: 1px solid var(--aico-color-border-medium);
  --xy-node-border-selected: 1px solid var(--aico-mint);
  --xy-node-boxshadow-hover: 0 1px 4px 1px rgba(0, 0, 0, 0.3);
  --xy-node-boxshadow-selected: 0 0 0 0.5px var(--aico-mint);
  --xy-edge-stroke: var(--aico-grey-500);
  --xy-edge-stroke-selected: var(--aico-mint);
  --xy-handle-background-color: var(--aico-grey-500);
  --xy-handle-border-color: var(--aico-color-bg-primary);
  --xy-controls-button-background-color: var(--aico-color-bg-primary);
  --xy-controls-button-background-color-hover: var(--aico-color-bg-secondary);
  --xy-controls-button-color: var(--aico-color-text-primary);
  --xy-controls-button-border-color: var(--aico-color-border-light);
  --xy-background-color: var(--aico-color-bg-primary);
  --xy-background-pattern-dots-color: var(--aico-color-border-light);
  --xy-background-pattern-lines-color: var(--aico-color-border-light);
  --xy-minimap-background-color: var(--aico-color-bg-primary);
  --xy-minimap-mask-background-color: rgba(0, 0, 0, 0.6);
  --xy-selection-background-color: rgba(59, 130, 246, 0.12);
  --xy-selection-border: 1px dotted rgba(59, 130, 246, 0.8);
}

/* ======= 6. NAVIGATION THEME CLASSES ======= */
/* Light navigation theme class - apply to document root */
.nav-theme-light {
  --sidebar-bg-color: var(--nav-bg-color-light);
  --sidebar-text-color: var(--nav-text-color-light);
  --sidebar-border-color: var(--nav-border-color-light);
  --sidebar-item-hover-bg: var(--nav-item-hover-bg-light);
  --sidebar-item-active-bg: var(--nav-item-active-bg-light);
  --sidebar-item-text-color: var(--nav-text-color-light);
  --sidebar-item-active-color: var(--nav-item-active-color-light);
  --sidebar-category-text-color: var(--nav-category-text-color-light);
  --sidebar-divider-color: var(--nav-divider-color-light);

  --header-bg-color: var(--nav-bg-color-light);
  --header-text-color: var(--nav-text-color-light);
  --header-border-color: var(--nav-border-color-light);
  --header-icon-color: var(--nav-icon-color-light);
  --header-icon-hover-color: var(--nav-icon-hover-color-light);
  --header-dropdown-bg: var(--nav-dropdown-bg-light);
  --header-dropdown-text: var(--nav-dropdown-text-light);
}

/* Dark navigation theme class - apply to document root */
.nav-theme-dark {
  --sidebar-bg-color: var(--nav-bg-color-dark);
  --sidebar-text-color: var(--nav-text-color-dark);
  --sidebar-border-color: var(--nav-border-color-dark);
  --sidebar-item-hover-bg: var(--nav-item-hover-bg-dark);
  --sidebar-item-active-bg: var(--nav-item-active-bg-dark);
  --sidebar-item-text-color: var(--nav-text-color-dark);
  --sidebar-item-active-color: var(--nav-item-active-color-dark);
  --sidebar-category-text-color: var(--nav-category-text-color-dark);
  --sidebar-divider-color: var(--nav-divider-color-dark);

  --header-bg-color: var(--nav-bg-color-dark);
  --header-text-color: var(--nav-text-color-dark);
  --header-border-color: var(--nav-border-color-dark);
  --header-icon-color: var(--nav-icon-color-dark);
  --header-icon-hover-color: var(--nav-icon-hover-color-dark);
  --header-dropdown-bg: var(--nav-dropdown-bg-dark);
  --header-dropdown-text: var(--nav-dropdown-text-dark);
}